/ .medium-centered
/   %h1.text-center 
/     Project Settings 
/     #subtitle= @project.name
/     
/ .small-centered.boxed
/   %h1#content-title
/     #subtitle Project Settings
/     = @project.name

.rbox.dashed.small.centered
  = link_to("Delete Project", yogo_project_path(@project), 
    :method => :delete, :class => 'button-link fright', 
    :confirm => "Are you sure you want to delete the #{@project.name} project?\nThere is no undo! Continue?" )
  = form_for(@project,:as => :project, :builder => YogoFormBuilder) do |f|
    = f.check_box(:is_private, :label => image_tag('icons/private_16.png') + " Private")
    = f.text_field(:investigator, :label => "Primary Investigator: ")
    = f.text_area(:description, :label => "Project Description: ")

    - unless Yogo::Setting[:local_only]
      %h3.tight Project Users
      .rbox.tight
        %span.bold All Users:
        %ul.all-users
          - unless @project.roles.empty? 
            - @project.roles.users.each do |user|
              // TODO: The role-selection below is clumsy, optimize plz
              %li= user.name + ": " + @project.roles.select{|g| g.users.include?(user) }.map{|g| g.name }.join(', ')
    .form-element
      = f.submit('Update', :class => 'button-link')
      = link_to('Cancel', yogo_projects_path, :class => 'cancel')
        
  / .rbox.dashed
  /   - field_set_tag("Users:") do
  /     = collection_select(:user, :user_id, User.all, :id, :name, {:prompt => false, :include_blank => true})
  / 
  /   - field_set_tag("Role:") do
  /     - for role in Role.all do
  /       = check_box_tag(role.name)
  /       = label_tag(role.name)
