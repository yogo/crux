<?xml version="1.0" encoding="utf-8"?>
<sparqlQueries>
  <!--  $Id: $

   This files sets up the queries that are needed for use
   with the SPARQL endpoint ontology lookup service.  There is
   one query "ontology-query" that is used to return the ontologies
   that the endpoint contains.  This query is optional for endpoints
   that support only a single ontology and that don't return a
   list of ontologies.

   The other four queries are four variants created for searching
   for terms in the ontology service.  The four variants are created
   by handling the cross-product of two binary choices:
      Exact vs Substring (really regular expression) match
      Include or exclude properties
   with the query to use to query for terms.

   The search string will be substituted for all occurrences of
   $SEARCH_STRING in the query.
  -->
  <listOntologiesQuery><![CDATA[
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX dc: <http://purl.org/dc/elements/1.1/>

SELECT ?ontologyId ?fullName ?versionNumber ?description
WHERE {?ontologyId rdf:type owl:Ontology .
       OPTIONAL { ?ontologyId rdfs:comment ?description } .
       OPTIONAL { {?ontologyId rdfs:label ?fullName}
                  UNION {?ontologyId dc:title ?fullName}} .
       OPTIONAL { ?ontologyId owl:versionInfo ?versionNumber } .
} ORDER BY (?ontologyId)
]]></listOntologiesQuery>
  <termExactWithPropertiesQuery><![CDATA[
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX dc: <http://purl.org/dc/elements/1.1/>

SELECT ?termId ?displayName ?description
WHERE {?termId rdf:type ?type .
       OPTIONAL { ?termId rdfs:comment ?description } .
       OPTIONAL { ?termId rdfs:label ?displayName } .
       FILTER (?type != owl:Ontology)
       FILTER ( str(?termId) = "$SEARCH_STRING"
	|| str(?displayName) = "$SEARCH_STRING"
	|| str(?description) = "$SEARCH_STRING"
	)

}
]]></termExactWithPropertiesQuery>
  <termExactWithoutPropertiesQuery><![CDATA[
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX dc: <http://purl.org/dc/elements/1.1/>

SELECT ?termId ?displayName ?description
WHERE {?termId rdf:type ?type .
       OPTIONAL { ?termId rdfs:comment ?description } .
       OPTIONAL { ?termId rdfs:label ?displayName } .
       FILTER (?type != owl:Ontology)
       FILTER ( str(?termId) = "$SEARCH_STRING"
	|| str(?displayName) = "$SEARCH_STRING"
	|| str(?description) = "$SEARCH_STRING"
	)
       FILTER (?type != owl:Property
        && ?type != rdf:Property
        && ?type != owl:Property
        && ?type != owl:AnnotationProperty
        && ?type != owl:ObjectProperty
        && ?type != owl:DatatypeProperty
        && ?type != owl:FunctionalProperty
        && ?type != owl:TransitiveProperty
        && ?type != owl:SymmetricProperty
        )
}
]]></termExactWithoutPropertiesQuery>
  <termSubstringWithPropertiesQuery><![CDATA[
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX dc: <http://purl.org/dc/elements/1.1/>

SELECT ?termId ?displayName ?description
WHERE {?termId rdf:type ?type .
       OPTIONAL { ?termId rdfs:comment ?description } .
       OPTIONAL { ?termId rdfs:label ?displayName } .
       FILTER (?type != owl:Ontology)
       FILTER (regex(str(?termId), "$SEARCH_STRING", "i" )
	|| regex(str(?displayName), "$SEARCH_STRING", "i" )
	|| regex(str(?description), "$SEARCH_STRING", "i" )
	)
}
]]></termSubstringWithPropertiesQuery>
  <termSubstringWithoutPropertiesQuery><![CDATA[
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX dc: <http://purl.org/dc/elements/1.1/>

SELECT ?termId ?displayName ?description
WHERE {?termId rdf:type ?type .
       OPTIONAL { ?termId rdfs:comment ?description } .
       OPTIONAL { ?termId rdfs:label ?displayName } .
       FILTER (?type != owl:Ontology)
       FILTER (regex(str(?termId), "$SEARCH_STRING", "i" )
	|| regex(str(?displayName), "$SEARCH_STRING", "i" )
	|| regex(str(?description), "$SEARCH_STRING", "i" )
	)
       FILTER (?type != owl:Property
        && ?type != rdf:Property
        && ?type != owl:Property
        && ?type != owl:AnnotationProperty
        && ?type != owl:ObjectProperty
        && ?type != owl:DatatypeProperty
        && ?type != owl:FunctionalProperty
        && ?type != owl:TransitiveProperty
        && ?type != owl:SymmetricProperty
        )
}
]]></termSubstringWithoutPropertiesQuery>
</sparqlQueries>
